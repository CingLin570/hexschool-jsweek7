{"version":3,"sources":["webpack:///./src/views/frontend/Cart.vue?2e93","webpack:///src/views/frontend/Cart.vue","webpack:///./src/views/frontend/Cart.vue?b128","webpack:///./src/views/frontend/Cart.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","isLoading","on","$event","_v","_m","_l","item","key","product","id","preventDefault","removeCartItem","imageUrl","_s","title","quantity","quantityUpdata","unit","_f","price","cartTotal","staticRenderFns","data","cart","cartQuantity","created","getCart","methods","$http","get","url","then","num","patch","delete","console","log","err","component"],"mappings":"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","file":"js/chunk-2d0b2197.76282f12.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pt-5\"},[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('h2',{staticClass:\"mt-2\"},[_vm._v(\"這裡是購物車\")]),_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-body\"},[_c('table',{staticClass:\"table\"},[_vm._m(0),_c('tbody',[_vm._l((_vm.cart),function(item){return _c('tr',{key:item.product.id},[_c('th',{attrs:{\"scope\":\"row\"}},[_c('button',{staticClass:\"btn btn-outline-danger btn-sm\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.removeCartItem(item.product.id)}}},[_vm._v(\"刪除\")])]),_c('td',[_c('img',{staticClass:\"img-fluid\",attrs:{\"src\":item.product.imageUrl,\"alt\":\"\",\"width\":\"100px\"}})]),_c('td',[_vm._v(_vm._s(item.product.title))]),_c('td',[_c('div',{staticClass:\"d-flex justify-content-center\"},[_c('button',{staticClass:\"btn btn-outline-dark btn-sm rounded-0\",attrs:{\"type\":\"button\",\"disabled\":item.quantity === 1},on:{\"click\":function($event){return _vm.quantityUpdata(item.product.id, item.quantity - 1)}}},[_c('i',{staticClass:\"fas fa-minus\"})]),_c('span',{staticClass:\"d-flex align-items-center px-2 border-top border-bottom border-primary border-dark\"},[_vm._v(_vm._s(item.quantity))]),_c('button',{staticClass:\"btn btn-outline-dark btn-sm rounded-0\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.quantityUpdata(item.product.id, item.quantity + 1)}}},[_c('i',{staticClass:\"fas fa-plus\"})])])]),_c('td',[_vm._v(_vm._s(item.product.unit))]),_c('td',[_vm._v(_vm._s(_vm._f(\"total\")(item.product.price)))])])}),_c('tr',[_c('td'),_c('td'),_c('td'),_c('td'),_c('td',[_vm._v(\"總計\")]),_c('td',{staticClass:\"text-center\"},[_vm._v(\" \"+_vm._s(_vm._f(\"total\")(_vm.cartTotal))+\" \")])])],2)])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"刪除\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"產品圖片\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"產品名稱\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"產品數量\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"單位\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"價格\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"pt-5\">\r\n    <loading :active.sync=\"isLoading\"></loading>\r\n    <h2 class=\"mt-2\">這裡是購物車</h2>\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <table class=\"table\">\r\n  <thead>\r\n    <tr>\r\n      <th scope=\"col\">刪除</th>\r\n      <th scope=\"col\">產品圖片</th>\r\n      <th scope=\"col\">產品名稱</th>\r\n      <th scope=\"col\">產品數量</th>\r\n      <th scope=\"col\">單位</th>\r\n      <th scope=\"col\">價格</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr v-for=\"item in cart\" :key=\"item.product.id\">\r\n      <th scope=\"row\"><button type=\"button\" class=\"btn btn-outline-danger btn-sm\" @click.prevent=\" removeCartItem(item.product.id)\">刪除</button></th>\r\n      <td><img :src=\"item.product.imageUrl\" alt=\"\" class=\"img-fluid\" width=\"100px\"></td>\r\n      <td>{{item.product.title}}</td>\r\n      <td>\r\n        <div class=\"d-flex justify-content-center\">\r\n          <button type=\"button\" class=\"btn btn-outline-dark btn-sm rounded-0\"  @click=\"quantityUpdata(item.product.id, item.quantity - 1)\" :disabled=\"item.quantity === 1\"><i class=\"fas fa-minus\"></i></button>\r\n        <span class=\"d-flex align-items-center px-2 border-top border-bottom border-primary border-dark\">{{item.quantity}}</span>\r\n        <button type=\"button\" class=\"btn btn-outline-dark btn-sm rounded-0\" @click=\"quantityUpdata(item.product.id, item.quantity + 1)\"><i class=\"fas fa-plus\"></i></button>\r\n        </div>\r\n      </td>\r\n      <td>{{item.product.unit}}</td>\r\n      <td>{{item.product.price | total}}</td>\r\n    </tr>\r\n  <tr>\r\n    <td></td>\r\n    <td></td>\r\n    <td></td>\r\n    <td></td>\r\n    <td>總計</td>\r\n    <td class=\"text-center\">\r\n      {{ cartTotal | total }}\r\n    </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n      </div>\r\n</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      cart: [],\r\n      cartTotal: 0,\r\n      cartQuantity: 0,\r\n      isLoading: false\r\n    }\r\n  },\r\n  created () {\r\n    this.getCart()\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      this.isLoading = true\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/shopping`\r\n      this.$http.get(url).then((response) => {\r\n        this.cart = response.data.data\r\n        this.cart.forEach((item) => {\r\n          this.cartTotal += (item.product.price * item.quantity)\r\n          this.cartQuantity += item.quantity\r\n        })\r\n        this.isLoading = false\r\n      })\r\n    },\r\n    quantityUpdata (id, num) {\r\n      this.isLoading = true\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/shopping`\r\n      const data = {\r\n        product: id,\r\n        quantity: num\r\n      }\r\n      this.$http.patch(url, data).then((response) => {\r\n        this.cartTotal = 0\r\n        this.cartQuantity = 0\r\n        this.getCart()\r\n      })\r\n    },\r\n    removeCartItem (id) {\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/shopping/${id}`\r\n      this.isLoading = true\r\n      this.$http.delete(url).then(() => {\r\n        this.cartTotal = 0\r\n        this.cartQuantity = 0\r\n        this.getCart()\r\n      }).catch((err) => {\r\n        console.log(err.data)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cart.vue?vue&type=template&id=0c6c970e&\"\nimport script from \"./Cart.vue?vue&type=script&lang=js&\"\nexport * from \"./Cart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}