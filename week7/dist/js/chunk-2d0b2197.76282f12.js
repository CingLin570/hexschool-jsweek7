(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2197"],{2355:function(t,a,c){"use strict";c.r(a);var n=function(){var t=this,a=t.$createElement,c=t._self._c||a;return c("div",{staticClass:"pt-5"},[c("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),c("h2",{staticClass:"mt-2"},[t._v("這裡是購物車")]),c("div",{staticClass:"card"},[c("div",{staticClass:"card-body"},[c("table",{staticClass:"table"},[t._m(0),c("tbody",[t._l(t.cart,(function(a){return c("tr",{key:a.product.id},[c("th",{attrs:{scope:"row"}},[c("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(c){return c.preventDefault(),t.removeCartItem(a.product.id)}}},[t._v("刪除")])]),c("td",[c("img",{staticClass:"img-fluid",attrs:{src:a.product.imageUrl,alt:"",width:"100px"}})]),c("td",[t._v(t._s(a.product.title))]),c("td",[c("div",{staticClass:"d-flex justify-content-center"},[c("button",{staticClass:"btn btn-outline-dark btn-sm rounded-0",attrs:{type:"button",disabled:1===a.quantity},on:{click:function(c){return t.quantityUpdata(a.product.id,a.quantity-1)}}},[c("i",{staticClass:"fas fa-minus"})]),c("span",{staticClass:"d-flex align-items-center px-2 border-top border-bottom border-primary border-dark"},[t._v(t._s(a.quantity))]),c("button",{staticClass:"btn btn-outline-dark btn-sm rounded-0",attrs:{type:"button"},on:{click:function(c){return t.quantityUpdata(a.product.id,a.quantity+1)}}},[c("i",{staticClass:"fas fa-plus"})])])]),c("td",[t._v(t._s(a.product.unit))]),c("td",[t._v(t._s(t._f("total")(a.product.price)))])])})),c("tr",[c("td"),c("td"),c("td"),c("td"),c("td",[t._v("總計")]),c("td",{staticClass:"text-center"},[t._v(" "+t._s(t._f("total")(t.cartTotal))+" ")])])],2)])])])],1)},i=[function(){var t=this,a=t.$createElement,c=t._self._c||a;return c("thead",[c("tr",[c("th",{attrs:{scope:"col"}},[t._v("刪除")]),c("th",{attrs:{scope:"col"}},[t._v("產品圖片")]),c("th",{attrs:{scope:"col"}},[t._v("產品名稱")]),c("th",{attrs:{scope:"col"}},[t._v("產品數量")]),c("th",{attrs:{scope:"col"}},[t._v("單位")]),c("th",{attrs:{scope:"col"}},[t._v("價格")])])])}],s=(c("99af"),c("4160"),c("159b"),{data:function(){return{cart:[],cartTotal:0,cartQuantity:0,isLoading:!1}},created:function(){this.getCart()},methods:{getCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("958a050f-3e4c-4878-9e46-1770b3152f41","/ec/shopping");this.$http.get(a).then((function(a){t.cart=a.data.data,t.cart.forEach((function(a){t.cartTotal+=a.product.price*a.quantity,t.cartQuantity+=a.quantity})),t.isLoading=!1}))},quantityUpdata:function(t,a){var c=this;this.isLoading=!0;var n="".concat("https://course-ec-api.hexschool.io","/api/").concat("958a050f-3e4c-4878-9e46-1770b3152f41","/ec/shopping"),i={product:t,quantity:a};this.$http.patch(n,i).then((function(t){c.cartTotal=0,c.cartQuantity=0,c.getCart()}))},removeCartItem:function(t){var a=this,c="".concat("https://course-ec-api.hexschool.io","/api/").concat("958a050f-3e4c-4878-9e46-1770b3152f41","/ec/shopping/").concat(t);this.isLoading=!0,this.$http.delete(c).then((function(){a.cartTotal=0,a.cartQuantity=0,a.getCart()})).catch((function(t){console.log(t.data)}))}}}),o=s,e=c("2877"),r=Object(e["a"])(o,n,i,!1,null,null,null);a["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2d0b2197.76282f12.js.map